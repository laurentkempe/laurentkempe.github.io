
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Laurent Kempé">
    <title>Optimizing Skye Editor using JetBrains dotTrace - Laurent Kempé</title>
    <meta name="author" content="Laurent Kempé">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Laurent Kempé","sameAs":["https://github.com/laurentkempe","https://bsky.app/profile/laurentkempe.com","https://twitter.com/laurentkempe","https://www.linkedin.com/in/laurentkempe","https://flickr.com/photos/laurentkempe/"],"image":"https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg"},"articleBody":"\n\nThis post is a transcript of an internal post I did on Innoveo Solutions internal blog. Thanks to Innoveo to let me share this here!\nSkye Editor is our metal model editor which is written in C# 4, WPF uses Model-View-ViewModel design pattern and MVVM Light.\n\n\nThe post shows the usage of JetBrains dotTace to optimize Skye Editor and the importance of profiling your code, here it is.\nFor the release 2.20 of our Skye Editor product we have done already some optimization like “FindProductValue of ModelProduct to use a dictionary”\nStarting of the release 2.21 the goal was to go one step further with “Optimize Loading&#x2F;Deleting of definition and update to MVVMLight 4 RTM”\nThe results are quite awesome!\nHere I am comparing the last version of Skye Editor which we shipped, 2.18 to the version currently in development for the next release 2.21.\nThe performance measurement scenario is as following:\n\nStarting the application \nLoading a big definition, BigDefinition.zip, 2743 Kb zip, 19928 Kb Xml \nDeleting a brick which as lots of sub bricks and attributes, value ranges, values…\n\nI used the profiler dotTrace from JetBrains to measure the performance improvement.\nHere is a first result for the method ActualizeFromNewArchive, which is used when we load, import or activate a definition. This method is responsible of building all the View Models used in the editor which we use to display the tree of root, brick, the attributes, value range, values but also the backendinfo.. and finally the texts. So on big definition there is a lot to create especially for the texts.\n2.18\n\n2.21\n\nSo we went from 9083ms to 944ms which is around a 9.6 factor improvement as we can see on the following picture!\n\nThat’s quite impressive. But where does it come from? Let dig deeper in the execution tree.\n2.18 \n\n2.21 \n\nSo the first improvement is due an improvement done on MVVM Light 4 RTM a library we are using from the beginning which lets us decouple our View Models &#x2F; Views using some messaging mechanisms among other features. I helped it’s author Laurent Bugnion to test and to improve the toolkit, he even mention us on MVVM Light 4 RTM.\nWe went from 2219ms to 35ms but across the whole scenario (all usage of the Register method) we went from 3072ms to 130ms, which we can see here:\n\nThe improvement there is that CleanupList is not anymore done at that moment but only when the application is idle. Clever. And what is really cool is that I mentioned that performance issue and Laurent fixed it in the next release. Thanks Laurent!\nBut this is not all because we have won only 3072ms which doesn’t bring us from 9083ms to 944ms.\nThe other big improvement is the optimization of the way we find value which as radically changed.\n2.18 \n\n2.21 \n\nFrom 5103ms to 13ms !\n2.18\n\npublic ProductValue FindProductValue(string uuid)        {            return Values.AsBindingQueryable().FirstOrDefault(pv &#x3D;&gt; pv.UUID &#x3D;&#x3D; uuid);        }\n\n2.21\n\npublic ProductValue FindProductValue(string uuid)        {            return Values.FindBindingByUuid(uuid);        }\n\nLook more in details\n2.18\n\nprivate readonly List _bindingList;\n\n    public IQueryable&lt;TBinding&gt; AsBindingQueryable()\n    &#123;\n        return _bindingList.AsQueryable();\n    &#125;\n\n2.21\n\npublic TBinding FindBindingByUuid(string uuid)        {            Tuple&lt;TBinding, TModel&gt; value;            _modelDictionary.Value.TryGetValue(uuid, out value);            return value !&#x3D; null ? value.Item1 : default(TBinding);\n\nThe huge difference between those two methods is that the 2.18 is using a list and LINQ to find the first value which match the uuid we are searching. When the 2.21 is using a dictionary which index all values by uuid. \nAnother improvement of the 2.21 was to go from the following version of the method to the previously shown one: \n\npublic TBinding FindBindingByUuid(string uuid)        {            return _modelDictionary.Value.ContainsKey(uuid) ?\n               _modelDictionary.Value[uuid].Item1 : default(TBinding);\n    &#125;\n\n\nThis one make two access to the dictionary and the other only one access, which improved also quite a bit. \nAnother improvement is that we removed the usage of a ThreadSafeObservableCollection which was dispatching to the UI thread all operations. Basically you could operate the collection from a background thread while it was bound to the UI, which normally you cannot do due to thread affinity, except if you dispatch, which for sure as a cost. \nSo that’s it for the improvement when we load&#x2F;import&#x2F;activate a definition! \nNow about deleting. \n2.18\n\n2.21\n\nIt would be nice to have this gain but in fact we had to refactor the operation so that one part is executed on the UI thread on the other part on a background thread. So basically what touch to the View Model is executed into the UI thread and what touch the Model on the background thread. \nSo we have also to count this \n2.18\n\n2.21\n\nSo we go from 30720ms to 21666ms. Which is again a good improvement \nThis can be again improved a lot because currently we have to traverse the whole tree and count all the relations to the texts we want to delete which is accounting for 19468ms. \nWith a cache of relation it will much much faster. But that for next time! \nI hope you will enjoy the time saving of all those optimizations in Skye Editor! \n","dateCreated":"2012-12-07T12:55:00+00:00","dateModified":"2012-12-07T22:07:27+00:00","datePublished":"2012-12-07T12:55:00+00:00","description":"\n\nThis post is a transcript of an internal post I did on Innoveo Solutions internal blog. Thanks to Innoveo to let me share this here!\nSkye Editor is our metal model editor which is written in C# 4, WPF uses Model-View-ViewModel design pattern and MVVM Light.","headline":"Optimizing Skye Editor using JetBrains dotTrace","image":["https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_q.jpg","https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_c.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"},"publisher":{"@type":"Organization","name":"Laurent Kempé","sameAs":["https://github.com/laurentkempe","https://bsky.app/profile/laurentkempe.com","https://twitter.com/laurentkempe","https://www.linkedin.com/in/laurentkempe","https://flickr.com/photos/laurentkempe/"],"image":"https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg","logo":{"@type":"ImageObject","url":"https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg"}},"url":"https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/","keywords":"innoveo solutions, Jetbrains, C#, dotTrace","thumbnailUrl":"https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_q.jpg"}</script>
    <meta name="description" content="This post is a transcript of an internal post I did on Innoveo Solutions internal blog. Thanks to Innoveo to let me share this here! Skye Editor is our metal model editor which is written in C# 4, W">
<meta property="og:type" content="blog">
<meta property="og:title" content="Optimizing Skye Editor using JetBrains dotTrace">
<meta property="og:url" content="https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/index.html">
<meta property="og:site_name" content="Laurent Kempé">
<meta property="og:description" content="This post is a transcript of an internal post I did on Innoveo Solutions internal blog. Thanks to Innoveo to let me share this here! Skye Editor is our metal model editor which is written in C# 4, W">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://farm9.staticflickr.com/8203/8251402507_20b0511221_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8337/8251402531_a91f4332cc_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8482/8251410205_f0b9c20d9f_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8060/8251413607_5bc4a306cd_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8209/8251414039_f746ba2210_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8059/8251415365_ec74709abb_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8490/8251415203_89e2f8798d_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8347/8251415265_a21d2f2500_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8066/8251415073_7435454566_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8067/8252484362_4bd63cd9fc_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8346/8251415035_5eb2e1fda1_o.jpg">
<meta property="og:image" content="http://farm9.staticflickr.com/8343/8252484168_cb07bb43e2_o.jpg">
<meta property="article:published_time" content="2012-12-07T12:55:00.000Z">
<meta property="article:modified_time" content="2012-12-07T22:07:27.000Z">
<meta property="article:author" content="Laurent Kempé">
<meta property="article:tag" content="innoveo solutions">
<meta property="article:tag" content="Jetbrains">
<meta property="article:tag" content="C#">
<meta property="article:tag" content="dotTrace">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://farm9.staticflickr.com/8203/8251402507_20b0511221_o.jpg">
<meta name="twitter:creator" content="@laurentkempe">
    
    
        
    
    
        <meta property="og:image" content="https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg"/>
    
    
        <meta property="og:image" content="https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_q.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_q.jpg"/>
    
    
        <meta property="og:image" content="https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_c.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_c.jpg"/>
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-nj2tcgsxvavixx0ekjaz3nmbwnwdxxgtchtg7syzmgnqgmjuvsvnfsetvjhz.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Laurent Kempé
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Laurent Kempé</h4>
                
                    <h5 class="sidebar-profile-bio"><p>I am an experienced Team Leader &amp; Distinguished Solution Architect with a passion for shipping high-quality products by empowering development team and culture toward an agile mindset. I bring technical vision and strategy, leading engineering teams to move product, processes and architecture forward.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/presentations.html"
                            
                            rel="noopener"
                            title="Presentations"
                        >
                        <i class="sidebar-button-icon fa fa-file-powerpoint" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Presentations</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/about-laurent-kempe.html"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/laurentkempe"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://bsky.app/profile/laurentkempe.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Bluesky"
                        >
                        <i class="sidebar-button-icon fab fa-bluesky" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Bluesky</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/laurentkempe"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/in/laurentkempe"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://flickr.com/photos/laurentkempe/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Flickr"
                        >
                        <i class="sidebar-button-icon fab fa-flickr" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Flickr</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://feeds.feedburner.com/laurentkempe"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-left
                    post-header-cover--partial"
             style="background-image:url('https://farm9.staticflickr.com/8150/6969851740_a5dbe52669_c.jpg');"
             data-behavior="5">
            
                <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Optimizing Skye Editor using JetBrains dotTrace
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2012-12-07T12:55:00+00:00">
	
		    Dec 07, 2012
    	
    </time>
    
</div>

    
</div>

            
        </div>

            <div id="main" data-behavior="5"
                 class="hasCover
                        hasCoverMetaIn
                        hasCoverCaption">
                
<article class="post">
    
        <span class="post-header-cover-caption caption">Vosges, France</span>
    
    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- [![WP_000092](http://farm9.staticflickr.com/8150/6969851740_a5dbe52669_m.jpg)](http://www.flickr.com/photos/laurentkempe/6969851740/ "WP_000092 by Laurent Kempé, on Flickr") -->

<p>This post is a transcript of an internal post I did on <a target="_blank" rel="noopener" href="http://www.innoveo.com/">Innoveo Solutions</a> internal blog. Thanks to Innoveo to let me share this here!</p>
<p>Skye Editor is our metal model editor which is written in C# 4, WPF uses <a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/magazine/dd419663.aspx">Model-View-ViewModel</a> design pattern and <a target="_blank" rel="noopener" href="http://mvvmlight.codeplex.com/">MVVM Light</a>.</p>
<span id="more"></span>

<p>The post shows the usage of <a target="_blank" rel="noopener" href="http://www.jetbrains.com/profiler/">JetBrains dotTace</a> to optimize Skye Editor and the importance of profiling your code, here it is.</p>
<p>For the release 2.20 of our Skye Editor product we have done already some optimization like “FindProductValue of ModelProduct to use a dictionary”</p>
<p>Starting of the release 2.21 the goal was to go one step further with “Optimize Loading&#x2F;Deleting of definition and update to MVVMLight 4 RTM”</p>
<p>The results are quite awesome!</p>
<p>Here I am comparing the last version of Skye Editor which we shipped, 2.18 to the version currently in development for the next release 2.21.</p>
<p>The performance measurement scenario is as following:</p>
<ul>
<li>Starting the application </li>
<li>Loading a big definition, BigDefinition.zip, 2743 Kb zip, 19928 Kb Xml </li>
<li>Deleting a brick which as lots of sub bricks and attributes, value ranges, values…</li>
</ul>
<p>I used the profiler <a target="_blank" rel="noopener" href="http://www.jetbrains.com/profiler/">dotTrace from JetBrains</a> to measure the performance improvement.</p>
<p>Here is a first result for the method ActualizeFromNewArchive, which is used when we load, import or activate a definition. This method is responsible of building all the View Models used in the editor which we use to display the tree of root, brick, the attributes, value range, values but also the backendinfo.. and finally the texts. So on big definition there is a lot to create especially for the texts.</p>
<p>2.18</p>
<p><img src="http://farm9.staticflickr.com/8203/8251402507_20b0511221_o.jpg"></p>
<p>2.21</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8337/8251402531_a91f4332cc_o.jpg"></font></p>
<p>So we went from <strong>9083ms</strong> to <strong>944ms</strong> which is around a 9.6 factor improvement as we can see on the following picture!</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8482/8251410205_f0b9c20d9f_o.jpg"></font></p>
<p>That’s quite impressive. But where does it come from? Let dig deeper in the execution tree.</p>
<p>2.18 </p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8060/8251413607_5bc4a306cd_o.jpg"></font></p>
<p>2.21 </p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8209/8251414039_f746ba2210_o.jpg"></font></p>
<p>So the first improvement is due an improvement done on <a target="_blank" rel="noopener" href="http://www.galasoft.ch/mvvm/">MVVM Light 4 RTM</a> a library we are using from the beginning which lets us decouple our View Models &#x2F; Views using some messaging mechanisms among other features. I helped it’s author <a target="_blank" rel="noopener" href="http://www.galasoft.ch/intro_en.html">Laurent Bugnion</a> to test and to improve the toolkit, he even mention us on <a target="_blank" rel="noopener" href="http://www.galasoft.ch/mvvm/">MVVM Light 4 RTM</a>.</p>
<p>We went from <strong>2219ms</strong> to <strong>35ms</strong> but across the whole scenario (all usage of the Register method) we went from <strong>3072ms</strong> to <strong>130ms</strong>, which we can see here:</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8059/8251415365_ec74709abb_o.jpg"></font></p>
<p>The improvement there is that CleanupList is not anymore done at that moment but only when the application is idle. Clever. And what is really cool is that I mentioned that performance issue and Laurent fixed it in the next release. Thanks Laurent!</p>
<p>But this is not all because we have won only 3072ms which doesn’t bring us from 9083ms to 944ms.</p>
<p>The other big improvement is the optimization of the way we find value which as radically changed.</p>
<p>2.18 </p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8490/8251415203_89e2f8798d_o.jpg"></font></p>
<p>2.21 </p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8347/8251415265_a21d2f2500_o.jpg"></font></p>
<p>From <strong>5103ms</strong> to <strong>13ms</strong> !</p>
<p><strong>2.18</strong></p>
<blockquote>
<p>public ProductValue FindProductValue(string uuid)<br>        {<br>            return Values.AsBindingQueryable().FirstOrDefault(pv &#x3D;&gt; pv.UUID &#x3D;&#x3D; uuid);<br>        }</p>
</blockquote>
<p><strong>2.21</strong></p>
<blockquote>
<p>public ProductValue FindProductValue(string uuid)<br>        {<br>            return Values.FindBindingByUuid(uuid);<br>        }</p>
</blockquote>
<p>Look more in details</p>
<p><strong>2.18</strong></p>
<blockquote>
<p>private readonly List<TBinding> _bindingList;</p>
</blockquote>
<pre><code>    public IQueryable&lt;TBinding&gt; AsBindingQueryable()
    &#123;
        return _bindingList.AsQueryable();
    &#125;
</code></pre>
<p><strong>2.21</strong></p>
<blockquote>
<p>public TBinding FindBindingByUuid(string uuid)<br>        {<br>            Tuple&lt;TBinding, TModel&gt; value;<br>            _modelDictionary.Value.TryGetValue(uuid, out value);<br>            return value !&#x3D; null ? value.Item1 : default(TBinding);</p>
</blockquote>
<p>The huge difference between those two methods is that the 2.18 is using a list and LINQ to find the first value which match the uuid we are searching. When the 2.21 is using a dictionary which index all values by uuid. </p>
<p>Another improvement of the 2.21 was to go from the following version of the method to the previously shown one: </p>
<blockquote>
<p>public TBinding FindBindingByUuid(string uuid)<br>        {<br>            return _modelDictionary.Value.ContainsKey(uuid) ?</p>
<pre><code>               _modelDictionary.Value[uuid].Item1 : default(TBinding);
    &#125;
</code></pre>
</blockquote>
<p>This one make two access to the dictionary and the other only one access, which improved also quite a bit. </p>
<p>Another improvement is that we removed the usage of a ThreadSafeObservableCollection which was dispatching to the UI thread all operations. Basically you could operate the collection from a background thread while it was bound to the UI, which normally you cannot do due to thread affinity, except if you dispatch, which for sure as a cost. </p>
<p>So that’s it for the improvement when we load&#x2F;import&#x2F;activate a definition! </p>
<p>Now about deleting. </p>
<p>2.18</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8066/8251415073_7435454566_o.jpg"></font></p>
<p>2.21</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8067/8252484362_4bd63cd9fc_o.jpg"></font></p>
<p>It would be nice to have this gain but in fact we had to refactor the operation so that one part is executed on the UI thread on the other part on a background thread. So basically what touch to the View Model is executed into the UI thread and what touch the Model on the background thread. </p>
<p>So we have also to count this </p>
<p>2.18</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8346/8251415035_5eb2e1fda1_o.jpg"></font></p>
<p>2.21</p>
<p><font style="background-color: #ffff00"><img src="http://farm9.staticflickr.com/8343/8252484168_cb07bb43e2_o.jpg"></font></p>
<p>So we go from <strong>30720ms</strong> to <strong>21666ms</strong>. Which is again a good improvement </p>
<p>This can be again improved a lot because currently we have to traverse the whole tree and count all the relations to the texts we want to delete which is accounting for <strong>19468ms</strong>. </p>
<p>With a cache of relation it will much much faster. But that for next time! </p>
<p>I hope you will enjoy the time saving of all those optimizations in Skye Editor! </p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/C/" rel="tag">C#</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Jetbrains/" rel="tag">Jetbrains</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/dotTrace/" rel="tag">dotTrace</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/innoveo-solutions/" rel="tag">innoveo solutions</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2013/05/04/Git-Diff-Margin-display-Git-Diff-on-the-margin-of-the-current-file/"
                    data-tooltip="Git Diff Margin, display Git Diff on the margin of the current file in Visual Studio 2012"
                    aria-label="PREVIOUS: Git Diff Margin, display Git Diff on the margin of the current file in Visual Studio 2012"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2012/11/20/Using-ThreadSleep-in-unit-test-A-good-idea/"
                    data-tooltip="Using Thread.Sleep() in Unit Test! A good idea?"
                    aria-label="NEXT: Using Thread.Sleep() in Unit Test! A good idea?"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 Laurent Kempé. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2013/05/04/Git-Diff-Margin-display-Git-Diff-on-the-margin-of-the-current-file/"
                    data-tooltip="Git Diff Margin, display Git Diff on the margin of the current file in Visual Studio 2012"
                    aria-label="PREVIOUS: Git Diff Margin, display Git Diff on the margin of the current file in Visual Studio 2012"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2012/11/20/Using-ThreadSleep-in-unit-test-A-good-idea/"
                    data-tooltip="Using Thread.Sleep() in Unit Test! A good idea?"
                    aria-label="NEXT: Using Thread.Sleep() in Unit Test! A good idea?"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://laurentkempe.com/2012/12/07/Optimization-using-JetBrains-dotTrace/"
                        aria-label="global.share_on_linkedin"
                    >
                        <i class="fab fa-linkedin" aria-hidden="true"></i><span>global.share_on_linkedin</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://farm2.staticflickr.com/1971/31306281378_02b055ccfe_q.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Laurent Kempé</h4>
        
            <div id="about-card-bio"><p>I am an experienced Team Leader &amp; Distinguished Solution Architect with a passion for shipping high-quality products by empowering development team and culture toward an agile mindset. I bring technical vision and strategy, leading engineering teams to move product, processes and architecture forward.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Team Leader, Distinguished Solutions Architect</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Illzach, France
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://farm5.staticflickr.com/4437/37116073235_dda239221d_o.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-a0lxi21n9lh3kaitgglgcvbwmxqpissmevjsszlcqluototinhfehoprw4nf.min.js"></script>

<!--SCRIPTS END-->



    




    </body>
</html>
